LOC 4                  ;BEGIN AT LOCATION 4
Data 20                ;M4 = 20 (pointer to M20, used for LDR)
Data 21                ;M5 = 21 (pointer to M21, used for STR)
Data 22                ;M6 = 22 (pointer to M22, used for LDA)
Data 23                ;M7 = 23 (pointer to M23, used for LDX)
Data 24                ;M8 = 24 (pointer to M24, used for STX)

; --- Indirect targets ---
LOC 20
Data 15                ;M20 = 15 (value for LDR indirect)
Data 0                 ;M21 = 0  (target for STR indirect)
Data 0                 ;M22 = 0  (LDA will load address here indirectly)
Data 7                 ;M23 = 7  (value for LDX indirect)
Data 0                 ;M24 = 0  (target for STX indirect)

; --- Instructions ---
LOC 10
LDR 0,0,4,1            ;R0 <- c(M[c(4)]) = c(M20) = 15
STR 0,0,5,1            ;M[c(5)] <- R0, c(5)=21, so M21 <- 15
LDA 1,0,6,1            ;R1 <- EA = c(M6)=22
LDX 2,7,1              ;X2 <- c(M[c(7)]) = c(M23)=7
STX 2,8,1              ;M[c(8)] <- X2, c(8)=24, so M24 <- 7

HLT                    ;STOP
